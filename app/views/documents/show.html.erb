<div class="hero-unit">
	<p>
	  <b>Name:</b>
	  <%= @document.name %>
	</p>
	
	<p>
	  <b>Collection:</b>
	  <%= @document.collection_id %>
	</p>
	
	<p>
		<b>Owner:</b>
		<% if @document.user %>
			<%= @document.user.email %> 
		<% end %>
	</p>
	
	<p>
		<% if @document.public %>
			<a class="label label-important" href="<%= pub_priv_doc_path(@document, :public => "false") %>">
				<i class="icon-eye-open icon-white"></i>
				public
		<% else %>
			<a class="label label-default" href="<%= pub_priv_doc_path(@document, :public => "true") %>">
				<i class="icon-eye-close icon-white"></i>
				private
		<% end %>
		</a>
	</p>
	
	<hr/>
	
	<h2>Metadata</h2>
	<table class="table table-striped table-bordered table-condensed" style="width:0;">
		<% @mcolnames = get_data_colnames(@msdata) %>
		<tbody>
		<% @msdata.each do |msdata_row| %>
		<tr>
			<% msdata_row.values.each do |val| %>
				<td>
					<%= val %>
				</td>
			<% end %>
		</tr>
		<% end %>
		</tbody>
	</table>
	
	<% 
		#Get row data
		@row = @paged_sdata.first()
		#if there is no first row, set to empty instead of nil
		if @row == nil
			@row = {}
		end 
		@colnames = get_data_colnames(@paged_sdata) 
	%>
	
	<div class="container-fluid">
	    <h2>Data</h2>
		<!--Display data-->
		<!--TODO: make a partial-->
	    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="documents"
	    	data-source="<%= document_path(:id => @document.id, :format => :json) %>">
	     <thead>
	      <tr>
			    <% row_keys = [] %>
			    <% if !@row.empty? %>
			    	<% row_keys = @row.keys %>
			    <% end %>
			    <% row_keys.each do |name| %>
			    	<th><%= name %></th>
			    <% end %>
	      </tr>
	     </thead>
	     <tbody>
		 </tbody>
		</table>
	</div>
	
	
	<%= 
		#render 'viz/visualization', :layout => 'true'
	%>
	<hr/>
	
	<!--
	<div id="hidden_form">
	<h2>Data Manipulation</h2>
	<a class="btn btn-info" href="#">More</a>
	<a class="btn btn-inverse" href="#">Hide</a>
	-->

	<!--Document Manip Form-->
	<!--
	<%= form_tag(document_manip_path) do %>
		<%= hidden_field_tag(:id, @document[:id]) %>
		
		<% @colnames.each do |colname|%>
	    	<%= radio_button_tag("manip_colname", colname) %> 
	    	<%= colname %>
		<% end %>
		<br />
		<%= select_tag(:manip_func, options_for_select([ ["categorize","categorize"] ]))%>
		<br />
	    <%= submit_tag("Manipulate")%>
	<% end %>
	</ul>
	</div>
	-->
	<hr/>
	
	<%= link_to 'Edit', edit_document_path(@document) %> |
	<%= link_to 'Back', documents_path %>
</div>
