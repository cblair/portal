<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @document.name %>
</p>

<p>
  <b>Collection:</b>
  <%= @document.collection_id %>
</p>

<hr/>

<% row = @document.stuffing_data.first() %>
<% colnames = row.keys %>

<div>
	<h2>Visualization</h2>
		<%= form_tag(:controller => "viz") do %>
			<%= hidden_field_tag(:document_id, @document[:id]) %>
    <table>
        <thead>
            <tr>
                <th>X axis</th>
                <th>Y axis</th>
            </tr>
        </thead>
        <tr>
            <td>
                <%= select_tag("x_axis", options_for_select(colnames))%>
            </td>
            <td>
                <%= select_tag("y_axis", options_for_select(colnames))%>
            </td>
	<table>
		<!--Column names-->
		<tr>
			<td>Column name:</td>
			<% colnames.each do |colname|%>
			<td>
				<b><%= colname %></b>
			</td>
			<% end %>
		</tr>
		<!--Column types-->
		<tr>
			<td>Data type:</td>
			<% colnames.each do |colname|%>
			<td>
				<b><%= row[colname].class() %></b>
			</td>
			<% end %>
		</tr>
		
		<tr>
			<!--Links to Viz - x axis-->
			<td>X axis</td>
			<% colnames.each do |colname|%>
			<td>
                <%#	<%= check_box_tag("x_axis", colname) %> 
			</td>
			<% end %>
		</tr>
		<tr>
			<!--Links to Viz - x axis label-->
			<td>X axis label</td>
			<% colnames.each do |colname|%>
			<td>
				<%= check_box_tag("x_axis_labels", colname) %> 
			</td>
			<% end %>
		</tr>
		<tr>
			<td><%= submit_tag("Visualize")%></td>
			
		<% end %><!--end axis form-->
		</tr>
		
		<tr>
    </table>

</div>

<hr/>

<div>
<!--Document Manip Form-->
    <%= form_tag(document_manip_path) do %>
    <%= hidden_field_tag(:id, @document[:id]) %>
<h2>Data Manipulation</h2>
<%= select_tag(:manip_func, options_for_select([ ["map","map"] ]))%>
<ul>
    <% colnames.each do |colname|%>
        <li>
        <%= radio_button_tag("manip_colname", colname) %> 
        <%= colname %>
        </li>
    <% end %>
<% end %><!--end Data Manip form-->
</ul>
<%= submit_tag("Manipulate")%>
</div>

<hr/>

<div>
    <h2>Data</h2>
	<!--Display data-->
    <table class="table table-striped table-bordered table-condensed" style="width:0;">
        <thead><tr>
            <th><!--place holder for axis labels --></th>
    <% row.keys.each do |name| %>
            <th><%= name %></th>
    <% end %>
        </tr>></thhead>
	<% @document.stuffing_data.each do |row| %>
		<tr>
			<td><!--place holder for axis labels--></td>
			<% row.values.each do |val|%>
			<td>
				<%= val %>
			</td>
			<% end %>
		</tr>
	<% end %>
	</table>
</div>

<%= link_to 'Edit', edit_document_path(@document) %> |
<%= link_to 'Back', documents_path %>
